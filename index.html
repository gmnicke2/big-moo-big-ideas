<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>LIVE</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
    <script src="script.js"></script>
  </head>
  <body>
    <a-scene>
      
    <!-- #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  #  -->
      
      <!-- ASSET -->
      <a-assets>
        <img id="gradient" src="img/gradient.png">
        <img id="galaxy" src="img/galaxy-mirrored-half.png">
        <img id="catfur" src="img/textures/catfur.jpg">
        <audio id="meowAudio" src="sounds/meow.mp3">
          <audio id="swinger" src="sounds/Bpm100_C_SwingerChords_Synth.wav">
            <audio id="palmtrees" src="sounds/Bpm100_C_PalmTrees_Bass.wav">
            <audio id="beat100_1" src="sounds/Bpm100_DrumLoop_13.wav">
      </a-assets>
      
      <!-- BG -->
      <a-sky src="#galaxy"></a-sky>
      
      <!-- ENTITIES -->
      <!-- position="+R +UP +TWD-->
      
      <!-- gradient box -->
      <a-entity>
        <a-dodecahedron id="gradientDodeca" width="2" height="2" depth="2" sound="src: #swinger; on: spinPls; loop: true"
               position="0 2 -5" rotation="90 90 30" scale="1.25 1.25 1.25"
               src="#gradient">
          <a-animation attribute="rotation" begin="spinPls" end="stopSpinningPls" dur="950" repeat="indefinite" to="45 360 45"></a-animation>
        </a-dodecahedron>
      </a-entity>

      <a-entity>
        <a-octahedron id="gradientOcta" width="2" height="2" depth="2" sound="src: #palmtrees; on: spinPls; loop: true"
                        position="2 2 -1" rotation="90 90 30" scale="1.25 1.25 1.25"
                        src="#gradient">
          <a-animation attribute="rotation" begin="spinPls" end="stopSpinningPls" dur="950" repeat="indefinite" to="45 360 45"></a-animation>
        </a-octahedron>
      </a-entity>

      <a-entity>
        <a-box id="gradientBox" width="2" height="2" depth="2" sound="src: #beat100_1; on: spinPls; loop: true; volume: 0.75"
                      position="-2 2 1" rotation="90 90 30" scale="1.25 1.25 1.25"
                      src="#gradient">
          <a-animation attribute="rotation" begin="spinPls" end="stopSpinningPls" dur="950" repeat="indefinite" to="45 360 45"></a-animation>
        </a-box>
      </a-entity>

      <a-entity>
        <a-sphere id="startSphere" radius="1"
               position="-3 0 -3" rotation="90 90 30" scale="1.25 1.25 1.25"
               color="green">
          <a-animation attribute="rotation" begin="spinPls" end="stopSpinningPls" dur="950" repeat="indefinite" to="45 360 45"></a-animation>
        </a-sphere>
      </a-entity>
      
      <!-- egg -->
      <!--<a-torus position="0.1 0.75 -3" color="#fff" arc="360" rotation="-30 -30 0" radius="0.5" radius-tubular="0.1"></a-torus>
      <a-sphere position="0.12 0.75 -3" radius="0.3" rotation="-90 0 0" color="#ffcc99"></a-sphere>-->
      
      
      <!-- LIGHT -->
      <!--<a-light type="spot" color="#fefefe" position="-20 0 0" look-at="a-box"></a-light>
      <a-light type="point" color="#AAA" position="0 5 0"></a-light>-->

      <!-- CAMERA -->
      <a-camera position="0 0 0">
        <a-cursor color="#2E3A87"></a-cursor>
      </a-camera>

      <!-- kool kat for kool kids -->
      <a-entity position="100 2 200" id="cat" sound="src: #meowAudio; on: mouseenter">

        <a-box id="catbox" src="#catfur" position="0 2 7" depth="3" width="5" height="4"></a-box>
        <a-cone src="#catfur" position="-1.5 5 7" radius-bottom="0.8" radius-top="0" height="3.5"></a-cone>
        <a-cone src="#catfur" position="1.5 5 7" radius-bottom="0.8" radius-top="0" height="3.5"></a-cone>
        <a-ring color="black" position="1.1 2.4 5.4" rotation="0 180 0"
                theta-start="0" theta-length="180" radius-inner="0.7" radius-outer="1.0"></a-ring>
        <a-ring color="black" position="-1.1 2.4 5.4" rotation="0 180 0"
                theta-start="0" theta-length="180" radius-inner="0.7" radius-outer="1.0"></a-ring>
      </a-entity>


    </a-scene>
    
    <!-- SCRIPT -->
    <script>

      var setSpinning = function (entity) {
        if(entity.isSpinning != true) {
          entity.isSpinning = true;
          if(entity.components && entity.components.sound) {entity.components.sound.play();}
          entity.emit('spinPls');
        }
        else {
          entity.isSpinning = false;
          if(entity.components && entity.components.sound) {entity.components.sound.pause()};
          entity.emit('stopSpinningPls');
        }
        return entity;
      };

      document.querySelector('#gradientDodeca')
        .addEventListener('click', function() {
          setSpinning(this);
        });

      document.querySelector('#gradientOcta')
        .addEventListener('click', function() {
          setSpinning(this);
        });

      document.querySelector('#gradientBox')
        .addEventListener('click', function() {
          setSpinning(this);
        });

      document.querySelector('#startSphere')
        .addEventListener('click', function() {
          setSpinning(this);
          setSpinning(document.querySelector('#gradientBox'));
          setSpinning(document.querySelector('#gradientOcta'));
          setSpinning(document.querySelector('#gradientDodeca'));
        });
    </script>
    
  </body>
</html>